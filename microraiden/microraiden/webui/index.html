<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>µRaiden</title>
  <base href="/">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link id="favicon" rel="shortcut icon" type="image/png" href="/js/favicon.png">

  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.1.4/js.cookie.min.js"></script>

  <script src="/js/web3.js"></script>
  <script src="/js/microraiden.js"></script>

  <style>
@import url("https://fonts.googleapis.com/css?family=Roboto:400,700");

@font-face {
  font-family: 'Glyphicons Halflings';
  src: url('//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/fonts/glyphicons-halflings-regular.eot');
  src: url('//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/fonts/glyphicons-halflings-regular.eot?#iefix') format('embedded-opentype'),
       url('//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/fonts/glyphicons-halflings-regular.woff2') format('woff2'),
       url('//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/fonts/glyphicons-halflings-regular.woff') format('woff'),
       url('//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/fonts/glyphicons-halflings-regular.ttf') format('truetype'),
       url('//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/fonts/glyphicons-halflings-regular.svg#glyphicons_halflingsregular') format('svg');
}

.no-print {
  -webkit-filter: blur(5px);
  -moz-filter: blur(5px);
  -o-filter: blur(5px);
  -ms-filter: blur(5px);
  filter: blur(5px);
}

.mw-body {
  -webkit-filter: blur(5px);
  -moz-filter: blur(5px);
  -o-filter: blur(5px);
  -ms-filter: blur(5px);
  filter: blur(5px);
}

.mw-body {
  -webkit-filter: blur(5px);
  -moz-filter: blur(5px);
  -o-filter: blur(5px);
  -ms-filter: blur(5px);
  filter: blur(5px);
}

#mw-navigation {
  -webkit-filter: blur(5px);
  -moz-filter: blur(5px);
  -o-filter: blur(5px);
  -ms-filter: blur(5px);
  filter: blur(5px);
}

#footer {
  -webkit-filter: blur(5px);
  -moz-filter: blur(5px);
  -o-filter: blur(5px);
  -ms-filter: blur(5px);
  filter: blur(5px);
}

#overlay {
  filter: none !important;
  position: fixed; /* Sit on top of the page content */
  /*display: none;*/
  width: 100%; /* Full width (cover the whole page) */
  height: 100%; /* Full height (cover the whole page) */
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0,0,0,0.5); /* Black background with opacity */
  z-index: 10; /* Specify a stack order in case you're using a different order for other elements */
  cursor: pointer; /* Add a pointer on hover */
  overflow-y: auto !important;
}

@media screen and (min-width: 980px) {
  .box-container {
    font-size: 16px;
    width: 750px;
    margin: auto;
    margin-top: 50px;
    box-shadow: 0 0 5px #888888;
  }
}

@media screen and (max-width: 979px) {
  .box-container {
    font-size: 16px;
    width: 70%;
    margin-left: 15%;
    margin-right: 15%;
    margin-top: 50px;
    box-shadow: 0 0 20px #888888;
  }
}

.panel-heading {
  text-align: center;
  padding-top: 20px;
}

.logo {
  height: 65px;
  float: left;
  margin-right: -50px;
}

.panel-body {
  text-align: center;
}

.account-dropdown {
  margin-top: 0px;
  margin-bottom: 0px;
}

.instructions {
  margin-top: 20px;
  margin-bottom: 20px;
}

.uppertoolbar {
  padding-left: 10px;
  padding-right: 10px;
}

.account-label {
  min-width: 80px;
  font-size: 16px;
}

.account-select {
  font-size: 16px !important;
/*  width: auto !important;*/
/*  margin-left: 25px;*/
}

.log {
  padding-top: 5px;
  padding-bottom: 15px;
}

.loader {
  margin: auto;
  border: 5px solid #f3f3f3; /* Light grey */
  border-top: 5px solid #3498db; /* Blue */
  border-radius: 50%;
  width: 50px;
  height: 50px;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

li {
  display: block;
  float: left;
  padding: 20px 20px 0px 20px;
  font-size: 16px;
  text-align: left;
}

.transfer li:before {
  /*Using a Bootstrap glyphicon as the bullet point*/
  content: "\e081";
  font-family: 'Glyphicons Halflings';
  font-size: 25px;
  float: left;
  margin-top: -5px;
  margin-left: 10px;
  padding-right: 20px;
}

.sign li:before {
  /*Using a Bootstrap glyphicon as the bullet point*/
  content: "\270f";
  font-family: 'Glyphicons Halflings';
  font-size: 25px;
  float: left;
  margin-top: -5px;
  margin-left: 10px;
  padding-right: 20px;
}

.deposit {
/*    float: none;*/
/*    margin: 0 auto;*/
  margin-top: 20px;
  margin-bottom: 10px;
/*  margin-bottom: 10px;*/
/*  padding-left: 40px;*/
/*  padding-right: 40px;*/

}

.alert {
  margin-left: 10px;
  margin-right: 10px;
}

.channel {
  padding-top: 15px;
  padding-bottom: 70px;
}

.status-label {
  font-weight: bold;
  text-align: left;
}

.glyphicon.on-state-opened {
  color: #77b300;
  font-size: 60px;
  padding-left: 90px;
}

.glyphicon.on-state-closed {
  color: #cc0000;
  font-size: 60px;
  padding-left: 90px;
}

.glyphicon.on-state-settled,
.glyphicon.on-state-error {
  color: #ff8800;
  font-size: 50px;
  padding-left: 90px;
}

.bottom-section-text {
  padding-left:80px;
  padding-right: 80px;
  text-align: left;
}

.status {
  text-align: left;
  font-size: 20px;
}

.balance {
  font-size: 20px;
  text-align: left;
#  color: white;
}

.balance-icon {
  font-size: 20px;
  font-weight: bold;
  text-align: left !important;
#  color: white;
  padding-left: 0;
}

.balance-label {
  font-weight: bold;
  text-align: left;
}

.btn-default {
  height: 34px;
}

.btn-bar {
  padding-top: 15px;
}

.box-container .btn {
  font-size: 16px !important;
}

.box-container .input-group {
  font-size: 16px !important;
}

.box-container h3, .h3 {
    font-size: 34px !important;
    color: #000000;
}

.box-container h4, .h4 {
    font-size: 20px !important;
    color: #000000;
}

.box-container h5, .h5 {
    font-size: 16px !important;
    color: #000000;
}

h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
    font-family: "Roboto","Helvetica Neue",Helvetica,Arial,sans-serif !important;
    font-weight: 500 !important;
    line-height: 1.1 !important;
}

.text-danger {
  color: #cc0000 !important;
}

.text-warning {
  color: #ff8800 !important;
}

.text-primary {
  color: #2a9fd6 !important;
}

.green-btn {
  background-color: #77b300 !important;
}

.form-control[readonly] {
  background-color: #ffffff;
}

div.tooltip-inner {
	width: 150px;
}
  </style>
</head>

<body style="overflow-y: auto;">
  <div class="box-container">
    <div class="panel panel-default">
      <div class="panel-heading">
        <img class="logo" src="/js/logo.png" />
        <h3 style="padding-top: 0px; margin-top: 0px; margin-bottom: 5px">Transfer of <strong id="amount"></strong> <strong class="tkn-symbol">TKN</strong> requested</h3>
        <h4 style="padding-top: 0px;">µRaiden payment channel demo</h4>

      <!--<h4>Read this article and support the
        <span id="publisher" >publisher</span> -
      </h4>
      <h4>by transfering <strong id="amount"></strong> TKN tokens.</h4> -->
        <div class="col-xs-10 col-xs-offset-2 instructions" style="padding-left: 0px; text-align: left; margin-top: 30px; margin-bottom: 30px">

          <h5>
              1. Click <strong>Buy</strong> to get <strong class="tkn-symbol">TKN</strong> tokens in exchange for Ropsten Testnet ETH.
          </h5>
          <h5 style="margin-top: 10px;">
              2. Click <strong>Deposit</strong> to open a channel with the selected deposit of <strong class="tkn-symbol">TKN</strong>.
          </h5>
          <h5 style="margin-top: 10px;">
              3. For each transfer, <strong>sign</strong> the balance proof to access the content.
          </h5>
          <!--<h5>
              4. The tokens are now send via the µRaiden payment channel.
          </h5>
          <h5>
              5. PS: the balance is the cumulative sum of all previous payments and current one. It may also be shown multiplied by as many decimals as token decimals (up to 18).
          </h5> -->
        </div>

      <div class="account-dropdown form-horizontal">
        <div class="row">
          <div class="col-xs-8 col-xs-offset-2 uppertoolbar">
            <div class="input-group input-group">
              <span class="input-group-addon account-label" style="font-size: 16px" data-toggle="tooltip" data-placement="left" title="This is your current web3 account">Account</span>
              <select class="form-control account-select" id="accounts"><option value="" disabled selected>Select your testnet account</option></select>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-8 col-xs-offset-2 uppertoolbar">
            <div class="row deposit">
              <div class="col-sm-12" id="balance-column">
                <div class="input-group input-group">
                  <span class="input-group-addon account-label" style="font-size: 16px">Balance</span>
                  <input type="text" class="form-control tkn-balance tkn-decimals" id="token_balance" placeholder="Amount TKN"
                    style="font-size: 16px; text-align:right; border-right-width: 0px;" readonly>
                  <span class="input-group-btn">
                    <button type="button" class="btn btn-default token_buy" data-toggle="tooltip" data-placement="bottom" title="0.1 Eth = 50 TKN">Buy</button>
                  </span>
                </div>
              </div>
              <div class="col-sm-4" style="padding-left: 0px; display: none;" id="topup-column">
                <div class="input-group input-group">
                  <input type="number" class="form-control tkn-decimals" id="topup_deposit" placeholder="Amount to deposit"
                    style="text-align: right; font-size: 16px; height: 34px" min="0" value="2"/>
                  <span class="input-group-btn">
                    <button type="button" class="btn btn-default topup_start" data-toggle="tooltip" data-placement="bottom"
                      title="Increase the balance of an already open channel">Deposit</button>
                  </span>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>

    <div class="panel-body">
      <div class="row main_switch bottom-section-text" id="no_accounts">
        <div class="log">
          <h5 class="text-danger">No accounts found!</h5>
          <h5 class="text-danger">You may need to unlock your account on your Web3 provider. (Metamask/Mist/Parity)</h5>
        </div>
      </div>

      <div class="row main_switch bottom-section-text" id="invalid_contract">
        <div class="log">
          <h5 class="text-danger">Invalid contract response!</h5>
          <h5 class="text-danger">Web3 provider failed to get proper contract response.<br>Please, check your provider is in the right network and synced!</h5>
        </div>
      </div>

      <div class="row main_switch" id="channel_loading">
        <div class="log">
          <div class="loader"></div>
          <h5 class="text-primary">Loading channel</h5>
        </div>
      </div>

      <div class="row main_switch " id="channel_present">
        <h5 class="bottom-section-text">A channel was found for this address.</h5>

        <div class="channel" id="channel">
          <div class="col-xs-7">
            <div class="col-xs-6" id="status-icon">
              <span class="glyphicon glyphicon-ok-circle on-state on-state-opened" aria-hidden="true"></span>
              <span class="glyphicon glyphicon-ban-circle on-state on-state-closed" aria-hidden="true"></span>
              <span class="glyphicon glyphicon-resize-full on-state on-state-settled" aria-hidden="true"></span>
              <span class="glyphicon glyphicon-warning-sign on-state on-state-error" aria-hidden="true"></span>
            </div>
            <div class="col-xs-6 status-content">
              <div class="status-label">Status</div>
              <div class="status" id="status">
                <span class="label label-success on-state on-state-opened"><strong>opened</strong></span>
                <span class="label label-danger on-state on-state-closed"><strong>closed</strong></span>
                <span class="label label-warning on-state on-state-settled"><strong>settled</strong></span>
                <span class="label label-danger on-state on-state-error"><strong>invalid</strong></span>
              </div>
            </div>
          </div>
          <div class="col-xs-5 balance-content">
            <div class="balance-label">Remaining Balance</div>
            <div class="col-xs-5 balance-icon tkn-symbol">TKN</div>
            <div class="col-xs-7">
              <div class="balance" id="channel_present_balance"></div>
            </div>
          </div>
        </div>

        <h5 class="col-sm-12 on-state on-state-opened bottom-section-text">
          Press the Sign button to authorize the transfer.
        </h5>
        <!--h5 class="col-sm-12 on-state on-state-closed on-state-settled on-state-error">
          Choose an action to control the channel
        </h5-->

        <div class="col-sm-12 btn-bar" style="display: none">
          <div class="col-sm-2"></div>

          <!-- OPENED -->
          <button type="button" class="col-sm-2 btn btn-default on-state on-state-opened channel_present_close"
            style="margin-right: 5px">
            <span class="glyphicon glyphicon-remove"></span> Close
          </button>
          <button type="button" class="col-sm-2 btn btn-default on-state on-state-opened channel_present_forget"
            style="margin-right: 5px">
            <span class="glyphicon glyphicon-trash"></span> Forget
          </button>
          <button type="button" class="col-sm-4 btn btn-default on-state on-state-opened channel_present_sign">
            <span class="glyphicon glyphicon-pencil"></span> Sign
          </button>

          <!-- CLOSED -->
          <button type="button" class="col-sm-4 btn btn-default on-state on-state-closed channel_present_forget">
            <span class="glyphicon glyphicon-trash"></span> Forget
          </button>
          <button type="button" class="col-sm-4 btn btn-default on-state on-state-closed channel_present_settle"
            style="margin-left: 5px">
            <span class="glyphicon glyphicon-ok"></span> Settle
          </button>

          <!-- SETTLED -->
          <div class="col-sm-2"></div>
          <button type="button" class="col-sm-4 btn btn-default on-state on-state-settled on-state-error channel_present_forget">
            <span class="glyphicon glyphicon-trash"></span> Forget
          </button>

          <div class="col-sm-1"></div>
        </div>
      </div>

      <div class="row main_switch" id="channel_missing">
        <div class="log">
          <h5 class="text-warning">No channel was found registered for this account on this website.</h5>
        </div>
        <div class="row">
          <span class="instructions">
            <h5 class="bottom-section-text">In order to proceed...</h5>
            <ol class="bottom-section-text">
              <div class="transfer ">
                <li style="padding-left: 0px;">
                  Make a desired token <strong>deposit</strong> to open a channel with this site.
                </li>
              </div>
              <div class="sign ">
                <li style="padding-left: 0px;">
                  For each transfer, <strong>sign</strong> a message confirming the balance with the new transferred amount. <br>PS: the balance is the cumulative sum of all previous payments and current one. It may also be shown multiplied by as many decimals as token decimals (up to 18).
                </li>
              </div>
            </ol>
          </span>
        </div>
        <div class="row deposit">
          <div class="col-xs-8 col-xs-offset-2">
            <div class="input-group">
              <input type="number" class="form-control tkn-decimals" id="channel_missing_deposit" placeholder="Amount to deposit"
              style="font-size: 16px; text-align:right;" min="1" value="2"/>
              <span class="input-group-btn">
                <button type="button" class="btn btn-default" id="channel_missing_start" data-toggle="tooltip" data-placement="top" title="Open the payment channel">Deposit</button>
              </span>
            </div>
          </div>
        </div>
      </div>

      <div class="row main_switch" id="channel_opening">
        <div class="log">
          <div class="loader"></div>
          <h5 class="text-primary">The transactions are being processed.</h5>
          <h5 class="text-primary">Please authorize with your Ethereum client.</h5>
        </div>
      </div>

      <div class="row main_switch" id="topup">
        <div class="log">
          <h5 class="text-warning">Insufficient deposited funds on this channel.</h5>
        </div>
        <div class="row">
          <div class="col-xs-2"></div>
          <div class="col-xs-5">
            <div class="balance-label">Current Deposit</div>
            <div class="col-xs-4 balance-icon tkn-symbol">TKN</div>
            <div class="col-xs-8">
              <div class="balance" id="deposited"></div>
            </div>
          </div>
          <div class="col-xs-5 balance-content">
            <div class="balance-label">Remaining Balance</div>
            <div class="col-xs-4 balance-icon tkn-symbol">TKN</div>
            <div class="col-xs-8">
              <div class="balance" id="remaining"></div>
            </div>
          </div>
        </div>
      <div class="row" style="padding-top: 30px;">
          <span class="instructions ">
            <h5 class="bottom-section-text">In order to proceed, deposit at least <strong><span id="required"></span> <span class="tkn-symbol">TKN</span></strong> tokens</h5>
          </span>
        </div>
        <div class="row deposit">
          <div class=" col-sm-offset-1 col-sm-3" >
            <button type="button" class="btn btn-default btn-block channel_present_close">
              <span class="glyphicon glyphicon-remove"></span> Close
            </button>
          </div>
          <div class="col-sm-3" >
            <button type="button" class="btn btn-default btn-block channel_present_forget">
              <span class="glyphicon glyphicon-trash"></span> Forget
            </button>
          </div>
          <div class="col-sm-4">
            <div class="input-group input-group">
              <input type="number" class="form-control tkn-decimals" id="topup_deposit" placeholder="Amount to deposit"
              style="text-align: right; font-size: 16px;" min="0" value="2"/>
              <span class="input-group-btn">
                <button type="button" class="btn btn-default topup_start" data-toggle="tooltip" data-placement="bottom" title="Increase the balance of an already open channel">Deposit</button>
              </span>
            </div>
          </div>
        </div>
      </div>

    </div>
    </div>
  </div>

  <script type="text/javascript" src="/js/main.js"></script>
</body>
</html>
